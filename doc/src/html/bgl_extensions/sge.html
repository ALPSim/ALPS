<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Sub Graph Embedding</title>
<link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.0">
<link rel="home" href="../index.html" title="Chapter 1. BGL Extensions 1.0">
<link rel="up" href="../index.html" title="Chapter 1. BGL Extensions 1.0">
<link rel="prev" href="../index.html" title="Chapter 1. BGL Extensions 1.0">
<link rel="next" href="ack.html" title="Acknowledgment">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="..//Users/gamperl/eclipse/boost/boost.png"></td>
<td align="center"><a href="..//Users/gamperl/eclipse/boost/index.html">Home</a></td>
<td align="center"><a href="..//Users/gamperl/eclipse/boost/libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="..//Users/gamperl/eclipse/boost/more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../index.html"><img src="..//Users/gamperl/eclipse/boost/doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="..//Users/gamperl/eclipse/boost/doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="..//Users/gamperl/eclipse/boost/doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="ack.html"><img src="..//Users/gamperl/eclipse/boost/doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" title="Sub Graph Embedding">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="bgl_extensions.sge"></a> Sub Graph Embedding</h2></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="sge.html#bgl_extensions.sge_manual"> Manual</a></span></dt>
<dt><span class="section"><a href="sge.html#bgl_extensions.sge_types"> Types and Functions</a></span></dt>
<dt><span class="section"><a href="sge.html#bgl_extensions.sge_examples"> Examples</a></span></dt>
</dl></div>
<div class="section" title="Manual">
<div class="titlepage"><div><div><h3 class="title">
<a name="bgl_extensions.sge_manual"></a> Manual</h3></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="sge.html#bgl_extensions.sge_intro"> Introduction</a></span></dt>
<dt><span class="section"><a href="sge.html#bgl_extensions.sge_limits"> Concepts, Requirements and Limitations</a></span></dt>
</dl></div>
<div class="section" title="Introduction">
<div class="titlepage"><div><div><h4 class="title">
<a name="bgl_extensions.sge_intro"></a> Introduction</h4></div></div></div>
<p>
          The <code class="computeroutput"><span class="identifier">embedding</span></code> algorithm
          provides functionality to
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
            find all embeddings of a subgraph into a graph.
          </li>
<li class="listitem">
            find all embeddings of a subgraph into a graph if a vertex of the subgraph
            and a vertex of the graph are matched.
          </li>
</ul></div>
</div>
<div class="section" title="Concepts, Requirements and Limitations">
<div class="titlepage"><div><div><h4 class="title">
<a name="bgl_extensions.sge_limits"></a> Concepts, Requirements and Limitations</h4></div></div></div>
<p>
          The subgraph must model the following concepts: <code class="computeroutput"><span class="identifier">VertexListGraph</span></code>
          and <code class="computeroutput"><span class="identifier">AdjacencyGraph</span></code>. The
          graph must model the concepts <code class="computeroutput"><span class="identifier">VertexListGraph</span></code>,
          <code class="computeroutput"><span class="identifier">AdjacencyGraph</span></code> and <code class="computeroutput"><span class="identifier">AdjacendyMatrix</span></code>.
        </p>
<p>
          Only undirected graphs are supported. Any coloring is ignored.
        </p>
</div>
</div>
<div class="section" title="Types and Functions">
<div class="titlepage"><div><div><h3 class="title">
<a name="bgl_extensions.sge_types"></a> Types and Functions</h3></div></div></div>
<div class="toc"><dl><dt><span class="section"><a href="sge.html#bgl_extensions.embedding_synopsis"> Synopsis</a></span></dt></dl></div>
<p>
        The used property map must model <code class="computeroutput"><span class="identifier">LvaluePropertyMap</span></code>
        with the vertex descriptor of the subgraphs as key type and the vertex descriptor
        of the graph as value type. The property map ist passed by reference. Each
        embedding will overwrite the previous one. For each embedding, the property
        map contains a mapping for each vertex descriptor of the subgraph to a vertex
        descriptor of the graph.
      </p>
<p>
        The returned iterator <code class="computeroutput"><span class="identifier">embedding_iterator</span></code>
        models the <a href="http://www.sgi.com/tech/stl/ForwardIterator.html" target="_top"><code class="computeroutput"><span class="identifier">ForwardIterator</span></code></a> concept with the
        associated types:
      </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<code class="computeroutput"><span class="identifier">Value</span> <span class="identifier">type</span></code>:
          Reference to the property map type.
        </li>
<li class="listitem">
<code class="computeroutput"><span class="identifier">Distance</span> <span class="identifier">type</span></code>:
          <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">ptrdiff_t</span></code>
</li>
</ul></div>
<div class="section" title="Synopsis">
<div class="titlepage"><div><div><h4 class="title">
<a name="bgl_extensions.embedding_synopsis"></a> Synopsis</h4></div></div></div>
<p>
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span>
    <span class="keyword">class</span> <span class="identifier">property_map_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_prop0_type</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">no_property</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_prop0_type</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">no_property</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_prop1_type</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">no_property</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_prop1_type</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">no_property</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_prop2_type</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">no_property</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_prop2_type</span> <span class="special">=</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">no_property</span>
<span class="special">&gt;</span> <span class="keyword">class</span> <span class="identifier">embedding_iterator</span><span class="special">;</span> <span class="comment">// ForwardIterator with property_map_type const &amp; operator*() const;
</span>
<span class="keyword">template</span><span class="special">&lt;</span>
    <span class="keyword">class</span> <span class="identifier">property_map_type</span> 
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_type</span> 
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_prop0_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_prop0_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_prop1_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_prop1_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_prop2_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_prop2_type</span>
<span class="special">&gt;</span> <span class="keyword">typename</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span>
    <span class="identifier">embedding_iterator</span><span class="special">&lt;/*...*/&gt;</span>
  <span class="special">,</span> <span class="identifier">embedding_iterator</span><span class="special">&lt;/*...*/&gt;</span>
<span class="special">&gt;</span> <span class="identifier">embedding</span> <span class="special">(</span>
    <span class="identifier">property_map_type</span> <span class="special">&amp;</span> <span class="identifier">property_map</span>
  <span class="special">,</span> <span class="identifier">subgraph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph</span>
  <span class="special">,</span> <span class="identifier">graph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph</span>
  <span class="special">,</span> <span class="identifier">subgraph_prop0_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph_prop0</span>
  <span class="special">,</span> <span class="identifier">graph_prop0_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph_prop0</span>
  <span class="special">,</span> <span class="identifier">subgraph_prop1_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph_prop1</span>
  <span class="special">,</span> <span class="identifier">graph_prop1_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph_prop1</span>
  <span class="special">,</span> <span class="identifier">subgraph_prop2_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph_prop2</span>
  <span class="special">,</span> <span class="identifier">graph_prop2_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph_prop2</span>
<span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span>
    <span class="keyword">class</span> <span class="identifier">property_map_type</span> 
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_type</span> 
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_prop0_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_prop0_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_prop1_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_prop1_type</span>
<span class="special">&gt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span>
    <span class="identifier">embedding_iterator</span><span class="special">&lt;/*...*/&gt;</span>
  <span class="special">,</span> <span class="identifier">embedding_iterator</span><span class="special">&lt;/*...*/&gt;</span>
<span class="special">&gt;</span> <span class="identifier">embedding</span> <span class="special">(</span>
    <span class="identifier">property_map_type</span> <span class="special">&amp;</span> <span class="identifier">property_map</span>
  <span class="special">,</span> <span class="identifier">subgraph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph</span>
  <span class="special">,</span> <span class="identifier">graph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph</span>
  <span class="special">,</span> <span class="identifier">subgraph_prop0_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph_prop0</span>
  <span class="special">,</span> <span class="identifier">graph_prop0_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph_prop0</span>
  <span class="special">,</span> <span class="identifier">subgraph_prop1_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph_prop1</span>
  <span class="special">,</span> <span class="identifier">graph_prop1_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph_prop1</span>
<span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span>
    <span class="keyword">class</span> <span class="identifier">property_map_type</span> 
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_type</span> 
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_prop0_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_prop0_type</span>
<span class="special">&gt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span>
    <span class="identifier">embedding_iterator</span><span class="special">&lt;/*...*/&gt;</span>
  <span class="special">,</span> <span class="identifier">embedding_iterator</span><span class="special">&lt;/*...*/&gt;</span>
<span class="special">&gt;</span> <span class="identifier">embedding</span> <span class="special">(</span>
    <span class="identifier">property_map_type</span> <span class="special">&amp;</span> <span class="identifier">property_map</span>
  <span class="special">,</span> <span class="identifier">subgraph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph</span>
  <span class="special">,</span> <span class="identifier">graph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph</span>
  <span class="special">,</span> <span class="identifier">subgraph_prop0_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph_prop0</span>
  <span class="special">,</span> <span class="identifier">graph_prop0_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph_prop0</span>
<span class="special">);</span>

<span class="keyword">template</span><span class="special">&lt;</span>
    <span class="keyword">class</span> <span class="identifier">property_map_type</span> 
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">subgraph_type</span>
  <span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_type</span> 
<span class="special">&gt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span>
    <span class="identifier">embedding_iterator</span><span class="special">&lt;/*...*/&gt;</span>
  <span class="special">,</span> <span class="identifier">embedding_iterator</span><span class="special">&lt;/*...*/&gt;</span>
<span class="special">&gt;</span> <span class="identifier">embedding</span> <span class="special">(</span>
    <span class="identifier">property_map_type</span> <span class="special">&amp;</span> <span class="identifier">property_map</span>
  <span class="special">,</span> <span class="identifier">subgraph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph</span>
  <span class="special">,</span> <span class="identifier">graph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph</span>
<span class="special">);</span>
</pre>
<p>
          </p>
<p>
        </p>
</div>
</div>
<div class="section" title="Examples">
<div class="titlepage"><div><div><h3 class="title">
<a name="bgl_extensions.sge_examples"></a> Examples</h3></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="sge.html#bgl_extensions.latticeexample"> Generating a square lattice</a></span></dt>
<dt><span class="section"><a href="sge.html#bgl_extensions.embedding_counterexample"> Use the Sub Graph Embedder</a></span></dt>
<dt><span class="section"><a href="sge.html#bgl_extensions.listexample"> List all graphs with their Embeddings</a></span></dt>
</dl></div>
<div class="section" title="Generating a square lattice">
<div class="titlepage"><div><div><h4 class="title">
<a name="bgl_extensions.latticeexample"></a> Generating a square lattice</h4></div></div></div>
<p>
          This example does not directly depend on the <code class="computeroutput"><span class="identifier">embedding</span></code>
          algorihm, but the sub graph embedding algorithm requires a graph to embedd
          the subgraphs. In the following examples we need the function below to
          create a square lattice, to embed the subgraphs.
        </p>
<p>
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="comment">// file: embedding.lattice.hpp
</span><span class="preprocessor">#ifndef</span> <span class="identifier">EMBEDDING_LATTICE_HPP</span>
<span class="preprocessor">#define</span> <span class="identifier">EMBEDDING_LATTICE_HPP</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">graph</span><span class="special">/</span><span class="identifier">adjacency_list</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="comment">// create a sqare lattice of size L x L
</span><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">graph_type</span><span class="special">&gt;</span> <span class="identifier">graph_type</span> <span class="identifier">create_lattice</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">L</span><span class="special">)</span> <span class="special">{</span>
  <span class="identifier">graph_type</span> <span class="identifier">lattice</span><span class="special">(</span><span class="identifier">L</span> <span class="special">*</span> <span class="identifier">L</span><span class="special">);</span>
  <span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;</span> <span class="identifier">L</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span>
    <span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">j</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">j</span> <span class="special">&lt;</span> <span class="identifier">L</span><span class="special">;</span> <span class="special">++</span><span class="identifier">j</span><span class="special">)</span> <span class="special">{</span>
      <span class="identifier">add_edge</span><span class="special">(</span><span class="identifier">i</span> <span class="special">*</span> <span class="identifier">L</span> <span class="special">+</span> <span class="identifier">j</span><span class="special">,</span> <span class="special">(</span><span class="identifier">i</span> <span class="special">*</span> <span class="identifier">L</span> <span class="special">+</span> <span class="identifier">j</span> <span class="special">+</span> <span class="number">1</span><span class="special">)</span> <span class="special">%</span> <span class="special">(</span><span class="identifier">L</span> <span class="special">*</span> <span class="identifier">L</span><span class="special">),</span> <span class="identifier">lattice</span><span class="special">);</span>
      <span class="identifier">add_edge</span><span class="special">(</span><span class="identifier">i</span> <span class="special">*</span> <span class="identifier">L</span> <span class="special">+</span> <span class="identifier">j</span><span class="special">,</span> <span class="special">((</span><span class="identifier">i</span> <span class="special">+</span> <span class="number">1</span><span class="special">)</span> <span class="special">*</span> <span class="identifier">L</span> <span class="special">+</span> <span class="identifier">j</span><span class="special">)</span> <span class="special">%</span> <span class="special">(</span><span class="identifier">L</span> <span class="special">*</span> <span class="identifier">L</span><span class="special">),</span> <span class="identifier">lattice</span><span class="special">);</span>
    <span class="special">}</span>
  <span class="keyword">return</span> <span class="identifier">lattice</span><span class="special">;</span>
<span class="special">}</span>

<span class="preprocessor">#endif</span> <span class="comment">// EMBEDDING_LATTICE_HPP
</span></pre>
<p>
          </p>
<p>
        </p>
</div>
<div class="section" title="Use the Sub Graph Embedder">
<div class="titlepage"><div><div><h4 class="title">
<a name="bgl_extensions.embedding_counterexample"></a> Use the Sub Graph Embedder</h4></div></div></div>
<p>
          The <code class="computeroutput"><span class="identifier">embedding</span></code> has two functionalities:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
            we can glue two vertices together and find all embeddings of a subgraph
            into the graph where the glued vertices are fixed
          </li>
<li class="listitem">
            we can find all embeddings of the subgrahs into the graph, filtered,
            so that every embedding that uses a specific set of vertex descriptor
            of the graph appears only once.
          </li>
</ul></div>
<p>
          This example demonstrates both functionalities: We embed a four-vertex
          ring into a twelve by twelve square lattice.
        </p>
<p>
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="comment">// file: embedding.counter.hpp
</span><span class="preprocessor">#ifndef</span> <span class="identifier">EMBEDDING_COUNTER_HPP</span>
<span class="preprocessor">#define</span> <span class="identifier">EMBEDDING_COUNTER_HPP</span>

<span class="preprocessor">#include</span> <span class="string">"../src/embedding.hpp"</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">utility</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">vector</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">map</span><span class="special">&gt;</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">property_map</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">subgraph_type</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">graph_type</span><span class="special">&gt;</span> <span class="keyword">class</span> <span class="identifier">embedding_counter</span>
<span class="special">{</span>
  <span class="keyword">private</span><span class="special">:</span>
    <span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span>
        <span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">graph_traits</span><span class="special">&lt;</span><span class="identifier">subgraph_type</span><span class="special">&gt;::</span><span class="identifier">vertex_descriptor</span>
      <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">graph_traits</span><span class="special">&lt;</span><span class="identifier">graph_type</span><span class="special">&gt;::</span><span class="identifier">vertex_descriptor</span>
    <span class="special">&gt;</span> <span class="identifier">map_type</span><span class="special">;</span>
    <span class="keyword">typedef</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">associative_property_map</span><span class="special">&lt;</span><span class="identifier">map_type</span><span class="special">&gt;</span> <span class="identifier">property_map_type</span><span class="special">;</span>
  <span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">embedding_counter</span><span class="special">(</span>
        <span class="identifier">subgraph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph</span>
      <span class="special">,</span> <span class="identifier">graph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph</span>
    <span class="special">)</span>
      <span class="special">:</span> <span class="identifier">subgraph_</span><span class="special">(</span><span class="identifier">subgraph</span><span class="special">)</span> 
      <span class="special">,</span> <span class="identifier">graph_</span><span class="special">(</span><span class="identifier">graph</span><span class="special">)</span> 
    <span class="special">{}</span>
    <span class="keyword">inline</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">count</span><span class="special">()</span> <span class="special">{</span>
      <span class="identifier">embedding_iterator</span><span class="special">&lt;</span>
          <span class="identifier">property_map_type</span>
        <span class="special">,</span> <span class="identifier">subgraph_type</span>
        <span class="special">,</span> <span class="identifier">graph_type</span>
      <span class="special">&gt;</span> <span class="identifier">emb_it</span><span class="special">,</span> <span class="identifier">emb_end</span><span class="special">;</span> 
      <span class="identifier">map_type</span> <span class="identifier">map_store</span><span class="special">;</span>
      <span class="identifier">property_map_type</span> <span class="identifier">mapping</span><span class="special">(</span><span class="identifier">map_store</span><span class="special">);</span>
      <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">count_emb</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">tie</span><span class="special">(</span><span class="identifier">emb_it</span><span class="special">,</span> <span class="identifier">emb_end</span><span class="special">)</span> <span class="special">=</span> <span class="identifier">embedding</span><span class="special">(</span>
          <span class="identifier">mapping</span>
        <span class="special">,</span> <span class="identifier">subgraph_</span>
        <span class="special">,</span> <span class="identifier">graph_</span>
      <span class="special">);</span>
      <span class="keyword">for</span> <span class="special">(;</span> <span class="identifier">emb_it</span> <span class="special">!=</span> <span class="identifier">emb_end</span><span class="special">;</span> <span class="special">++</span><span class="identifier">emb_it</span><span class="special">)</span>
        <span class="special">++</span><span class="identifier">count_emb</span><span class="special">;</span>
      <span class="keyword">return</span> <span class="identifier">count_emb</span><span class="special">;</span>
    <span class="special">}</span>
    <span class="keyword">inline</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">count</span><span class="special">(</span>
        <span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">graph_traits</span><span class="special">&lt;</span><span class="identifier">graph_type</span><span class="special">&gt;::</span><span class="identifier">vertex_descriptor</span> <span class="identifier">graph_vertex</span>
      <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">graph_traits</span><span class="special">&lt;</span><span class="identifier">subgraph_type</span><span class="special">&gt;::</span><span class="identifier">vertex_descriptor</span> <span class="identifier">subgraph_vertex</span>
    <span class="special">)</span> <span class="special">{</span>
      <span class="identifier">embedding_iterator</span><span class="special">&lt;</span>
          <span class="identifier">property_map_type</span>
        <span class="special">,</span> <span class="identifier">subgraph_type</span>
        <span class="special">,</span> <span class="identifier">graph_type</span>
        <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">graph_traits</span><span class="special">&lt;</span><span class="identifier">subgraph_type</span><span class="special">&gt;::</span><span class="identifier">vertex_descriptor</span>
        <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">graph_traits</span><span class="special">&lt;</span><span class="identifier">graph_type</span><span class="special">&gt;::</span><span class="identifier">vertex_descriptor</span>
      <span class="special">&gt;</span> <span class="identifier">emb_it</span><span class="special">,</span> <span class="identifier">emb_end</span><span class="special">;</span> 
      <span class="identifier">map_type</span> <span class="identifier">map_store</span><span class="special">;</span>
      <span class="identifier">property_map_type</span> <span class="identifier">mapping</span><span class="special">(</span><span class="identifier">map_store</span><span class="special">);</span>
      <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">count_emb</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
      <span class="identifier">boost</span><span class="special">::</span><span class="identifier">tie</span><span class="special">(</span><span class="identifier">emb_it</span><span class="special">,</span> <span class="identifier">emb_end</span><span class="special">)</span> <span class="special">=</span> <span class="identifier">embedding</span><span class="special">(</span>
          <span class="identifier">mapping</span>
        <span class="special">,</span> <span class="identifier">subgraph_</span>
        <span class="special">,</span> <span class="identifier">graph_</span>
        <span class="special">,</span> <span class="identifier">subgraph_vertex</span>
        <span class="special">,</span> <span class="identifier">graph_vertex</span>
      <span class="special">);</span>
      <span class="keyword">for</span> <span class="special">(;</span> <span class="identifier">emb_it</span> <span class="special">!=</span> <span class="identifier">emb_end</span><span class="special">;</span> <span class="special">++</span><span class="identifier">emb_it</span><span class="special">)</span>
        <span class="special">++</span><span class="identifier">count_emb</span><span class="special">;</span>
      <span class="keyword">return</span> <span class="identifier">count_emb</span><span class="special">;</span>      
    <span class="special">}</span>
  <span class="keyword">private</span><span class="special">:</span>
    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">it_type</span><span class="special">&gt;</span> <span class="keyword">inline</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">count_impl</span><span class="special">(</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">pair</span><span class="special">&lt;</span><span class="identifier">it_type</span><span class="special">,</span> <span class="identifier">it_type</span><span class="special">&gt;</span> <span class="identifier">it_pair</span>
      <span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">count_emb</span> <span class="special">=</span> <span class="number">0</span>
    <span class="special">)</span> <span class="special">{</span>
      <span class="keyword">for</span> <span class="special">(;</span> <span class="identifier">it_pair</span><span class="special">.</span><span class="identifier">first</span> <span class="special">!=</span> <span class="identifier">it_pair</span><span class="special">.</span><span class="identifier">second</span><span class="special">;</span> <span class="special">++</span><span class="identifier">it_pair</span><span class="special">.</span><span class="identifier">first</span><span class="special">)</span>
        <span class="special">++</span><span class="identifier">count_emb</span><span class="special">;</span>    	
      <span class="keyword">return</span> <span class="identifier">count_emb</span><span class="special">;</span>
    <span class="special">}</span>

    <span class="identifier">subgraph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">subgraph_</span><span class="special">;</span>
    <span class="identifier">graph_type</span> <span class="keyword">const</span> <span class="special">&amp;</span> <span class="identifier">graph_</span><span class="special">;</span>
<span class="special">};</span>

<span class="preprocessor">#endif</span> <span class="comment">// embedding_COUNTER_HPP
</span></pre>
<p>
          </p>
<p>
        </p>
<p>
          This example produces the following output:
        </p>
<pre class="programlisting">Number of embeddings: 144
Number of embeddings with 0 and 0 glued together: 8
</pre>
<p>
          A twelve by twelve lattice has 144 plaquettes, so there are 144 possibilitis
          to embed a four-vertex ring in this lattice.
        </p>
<p>
          A square lattice has four adjacent plaquettes. For each plaquette there
          are two posibilities to embed a four-vertex ring if the vertex 0 is fixed:
        </p>
<pre class="programlisting">0 - 1       0 - 2
|   |  and  |   |
2 - 3       1 - 3
</pre>
</div>
<div class="section" title="List all graphs with their Embeddings">
<div class="titlepage"><div><div><h4 class="title">
<a name="bgl_extensions.listexample"></a> List all graphs with their Embeddings</h4></div></div></div>
<p>
          We can ask how many graphs are embeddable in a square lattice and how many
          embeddings exist for all graphs of a fixed size. The following example
          answers this question by generating all graphs with a fixed number of edges
          and test if they are embeddable into a square lattice and count the number
          of embeddings (see the <a href="../#bgl_extendions.embedding_counterexample" target="_top">previous
          example</a>).
        </p>
<p>
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="comment">// file: embedding.lsit.cpp
</span><span class="preprocessor">#include</span> <span class="string">"embedding.counter.hpp"</span>
<span class="preprocessor">#include</span> <span class="string">"nisy.generator.hpp"</span>
<span class="preprocessor">#include</span> <span class="string">"embedding.lattice.hpp"</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iomanip</span><span class="special">&gt;</span>

<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">timer</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">tuple</span><span class="special">/</span><span class="identifier">tuple</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">graph</span><span class="special">/</span><span class="identifier">adjacency_list</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="preprocessor">#define</span> <span class="identifier">MAX_GRAPH_SIZE</span> <span class="number">12</span>
<span class="preprocessor">#define</span> <span class="identifier">LATTICE_SIZE</span> <span class="number">12</span>
<span class="keyword">typedef</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">adjacency_list</span><span class="special">&lt;</span>
  <span class="identifier">boost</span><span class="special">::</span><span class="identifier">vecS</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">vecS</span><span class="special">,</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">undirectedS</span>
<span class="special">&gt;</span> <span class="identifier">graph_type</span><span class="special">;</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span> <span class="special">{</span>
  <span class="comment">// generate lattice
</span>  <span class="identifier">graph_type</span> <span class="identifier">lattice</span> <span class="special">=</span> <span class="identifier">create_lattice</span><span class="special">&lt;</span><span class="identifier">graph_type</span><span class="special">&gt;(</span><span class="identifier">LATTICE_SIZE</span><span class="special">);</span>
  <span class="comment">// construct generator
</span>  <span class="identifier">graph_generator</span><span class="special">&lt;</span><span class="identifier">graph_type</span><span class="special">&gt;</span> <span class="identifier">generator</span><span class="special">;</span>
  <span class="identifier">graph_generator</span><span class="special">&lt;</span><span class="identifier">graph_type</span><span class="special">&gt;::</span><span class="identifier">iterator</span> <span class="identifier">it</span><span class="special">,</span> <span class="identifier">end</span><span class="special">;</span>
  <span class="identifier">boost</span><span class="special">::</span><span class="identifier">timer</span> <span class="identifier">timer</span><span class="special">;</span>
  <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="string">"#edges #graphs #embeddings time[s]"</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
  <span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">i</span> <span class="special">&lt;=</span> <span class="identifier">MAX_GRAPH_SIZE</span><span class="special">;</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span> <span class="special">{</span>
    <span class="comment">// generate the graphs
</span>    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">tie</span><span class="special">(</span><span class="identifier">it</span><span class="special">,</span> <span class="identifier">end</span><span class="special">)</span> <span class="special">=</span> <span class="identifier">generator</span><span class="special">.</span><span class="identifier">generate</span><span class="special">(</span><span class="identifier">i</span><span class="special">);</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">gr_cnt</span> <span class="special">=</span> <span class="number">0</span><span class="special">,</span> <span class="identifier">emb_cnt</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>
    <span class="keyword">for</span><span class="special">(;</span> <span class="identifier">it</span> <span class="special">!=</span> <span class="identifier">end</span><span class="special">;</span> <span class="identifier">it</span><span class="special">++)</span> <span class="special">{</span>
      <span class="comment">// create an embedding counter
</span>      <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">cnt</span> <span class="special">=</span> <span class="identifier">embedding_counter</span><span class="special">&lt;</span>
        <span class="identifier">graph_type</span><span class="special">,</span> <span class="identifier">graph_type</span>
      <span class="special">&gt;(*</span><span class="identifier">it</span><span class="special">,</span> <span class="identifier">lattice</span><span class="special">).</span><span class="identifier">count</span><span class="special">(</span><span class="number">0</span><span class="special">,</span> <span class="number">0</span><span class="special">);</span>
      <span class="identifier">emb_cnt</span> <span class="special">+=</span> <span class="identifier">cnt</span><span class="special">;</span>
      <span class="keyword">if</span> <span class="special">(</span><span class="identifier">cnt</span><span class="special">)</span>
      	 <span class="special">++</span><span class="identifier">gr_cnt</span><span class="special">;</span>
    <span class="special">}</span>
    <span class="comment">// write the result to cout
</span>    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">setw</span><span class="special">(</span><span class="number">6</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span> <span class="special">&lt;&lt;</span> <span class="string">" "</span>
              <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">setw</span><span class="special">(</span><span class="number">7</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">gr_cnt</span> <span class="special">&lt;&lt;</span> <span class="string">" "</span> 
              <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">setw</span><span class="special">(</span><span class="number">11</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">emb_cnt</span>  <span class="special">&lt;&lt;</span> <span class="string">" "</span>
              <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">setw</span><span class="special">(</span><span class="number">7</span><span class="special">)</span> 
              <span class="special">&lt;&lt;</span> <span class="keyword">static_cast</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span><span class="special">&gt;(</span><span class="identifier">timer</span><span class="special">.</span><span class="identifier">elapsed</span><span class="special">()</span> <span class="special">+</span> <span class="special">.</span><span class="number">5</span><span class="special">)</span> 
              <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
  <span class="special">}</span>
  <span class="keyword">return</span> <span class="identifier">EXIT_SUCCESS</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
          </p>
<p>
        </p>
<p>
          The example produces the following table:
        </p>
<pre class="programlisting">#edges #graphs #embeddings time[s]
     0       0           0       0
     1       1           4       0
     2       1          12       0
     3       2          60       0
     4       4         204       0
     5       6         900       0
     6      14        3676       0
     7      28       16204       0
     8      68       69508       1
     9     156      328900       3
    10     399     1491884      14
    11    1012     7164740      66
    12    2732    34242396     311
</pre>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2009 Lukas Gamper<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at [@http://www.boost.org/LICENSE_1_0.txt])
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../index.html"><img src="..//Users/gamperl/eclipse/boost/doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="..//Users/gamperl/eclipse/boost/doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="..//Users/gamperl/eclipse/boost/doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="ack.html"><img src="..//Users/gamperl/eclipse/boost/doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
