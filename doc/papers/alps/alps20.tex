%\documentclass[3p,twocolumn]{elsarticle}
\documentclass[12pt]{iopart}

\usepackage{vistrails}
%\usepackage{amsmath}
%\usepackage{amssymb}
%\usepackage{amsmath}
\usepackage{color}
\usepackage{hyperref}
%\bibliographystyle{unsrt} %bibtex style according to iop latex guidelines
%\usepackage{harvard}
%\bibliographystyle{jphysicsB} %bibtex style according to iop latex guidelines

\renewcommand{\vistrailspath}{http://alps.comp-phys.org/vistrails/run_vistrails.php}
\renewcommand{\vistrailsdownload}{http://alps.comp-phys.org/vistrails/download.php}

\begin{document}

\title{The ALPS project release 2.0: \\ open source software for strongly correlated systems}


\newcounter{affiliation}
% with email addresses
%\newcommand{\myauthor}[3]{#2 {\small (#3)}$^{#1}$}
% without them
\newcommand{\myauthor}[3]{#2$^{#1}$}
\newcommand{\myaddress}[2]{\address{\refstepcounter{affiliation} $^{\arabic{affiliation}}$#2 \label{#1}}}

\author{
	\myauthor{\ref{eth}}{B. Bauer}{bauerb@phys.ethz.ch}
	\myauthor{\ref{colorado}}{L. Carr}{lcarr@mines.edu}
	\myauthor{\ref{graz}}{H.G. Evertz}{evertz@tugraz.at}
	\myauthor{\ref{wyoming}}{A. Feiguin}{afeiguin@uwyo.edu}
	\myauthor{\ref{utah}}{J. Freire}{juliana@cs.utah.edu}
	\myauthor{\ref{goettingen}}{S.~Fuchs}{fuchs@theorie.physik.uni-goettingen.de}
	\myauthor{\ref{eth}}{L. Gamper}{gamperl@gmail.com}
	\myauthor{\ref{eth}}{J. Gukelberger}{gukelberger@phys.ethz.ch}
	\myauthor{\ref{columbia}}{E. Gull}{gull@phys.columbia.edu}
	\myauthor{\ref{bonn}}{S.~Guertler}{guertler@th.physik.uni-bonn.de}
	\myauthor{\ref{eth}}{A.~Hehn}{hehn@phys.ethz.ch}
	\myauthor{\ref{jaea},\ref{crest}}{R.~Igarashi}{rigarash@hosi.phys.s.u-tokyo.ac.jp}
	\myauthor{\ref{utah}}{D. Koop}{dakoop@cs.utah.edu}
	\myauthor{\ref{eth}}{P.N. Ma}{pingnang@phys.ethz.ch}
	\myauthor{\ref{tokyo}}{H. Matsuo}{halm@looper.t.u-tokyo.ac.jp}
	\myauthor{\ref{eth},\ref{utah}}{P.~Mates}{phillipmates@gmail.com}
	\myauthor{\ref{paris}}{O. Parcollet}{parcolle@spht.saclay.cea.fr}
	\myauthor{\ref{affpol}}{G.~Pawlowski}{gpawlo@amu.edu.pl}
	\myauthor{\ref{epfl}}{J.D. Picon}{jean-david.picon@epfl.chl}
	\myauthor{\ref{harvard},\ref{eth}}{L.~Pollet}{pollet@phys.ethz.ch}
	\myauthor{\ref{goettingen}}{T.~Pruschke}{pruschke@theorie.physik.uni-goettingen.de}
	\myauthor{\ref{brazil},\ref{utah}}{E.~Santos}{emanuele@sci.utah.edu}
	\myauthor{\ref{virginia}}{V.~Scarola}{scarola@vt.edu}
	\myauthor{\ref{lmu}}{U.~Schollw\"ock}{schollwoeck@lmu.de}
	\myauthor{\ref{utah}}{C.~Silva}{csilva@sci.utah.edu}
	\myauthor{\ref{eth}}{B.~Surer}{surerb@phys.ethz.ch}
	\myauthor{\ref{tokyo}}{S. Todo}{wistaria@ap.t.u-tokyo.ac.jp}
	\myauthor{\ref{stationq}}{S.~Trebst}{trebst@kitp.ucsb.edu}
	\myauthor{\ref{eth}}{M.~Troyer}{troyer@ethz.ch}
	\myauthor{\ref{colorado}}{M. Wall}{mwall@mymail.mines.edu}
	\myauthor{\ref{eth}}{P. Werner}{werner@phys.ethz.ch}
	\myauthor{\ref{rwth},\ref{stuttgart}}{S. Wessel}{wessel@phys.ethz.ch}
}

\myaddress{eth}{Theoretische Physik, ETH Zurich, 8093 Zurich, Switzerland}
\myaddress{colorado}{Department of Physics, Colorado School of Mines, Golden, CO 80401, USA}
\myaddress{graz}{Institut f\"ur Theoretische Physik, Technische Universit\"at Graz, A-8010 Graz, Austria}
\myaddress{wyoming}{Department of Physics and Astronomy, University of Wyoming, Laramie, Wyoming 82071, USA}
\myaddress{utah}{Scientific Computing and Imaging Institute, University of Utah, Salt Lake City, Utah 84112, USA}
\myaddress{goettingen}{Institut f\"ur Theoretische Physik, Georg-August-Universit\"{a}t G\"{o}ttingen, G\"{o}ttingen, Germany}
\myaddress{columbia}{Columbia University, New York, NY 10027, USA}
\myaddress{bonn}{Bethe Center for Theoretical Phyics, Universit\"{a}t Bonn, Bonn, Germany}
\myaddress{jaea}{Center for Computational Science \& e-Systems, Japan Atomic Energy Agency, 110-0015 Tokyo, Japan}
\myaddress{crest}{Core Research for Evolutional Science and Technology, Japan Science and Technology Agency, 332-0012 Kawaguchi, Japan}
\myaddress{harvard}{Physics Department, Harvard University, Cambridge 02138, Massachusetts, USA} 
\myaddress{paris}{Institut de Physique Theorique, CEA/DSM/IPhT-CNRS/URA 2306, CEA-Saclay, F-91191 Gif-sur-Yvette, France} 
\myaddress{affpol}{Faculty of Physics, A. Mickiewicz University, ul. Umultowska 85, 61-614 Poznan, Poland}
\myaddress{epfl}{Institute of Theoretical Physics, EPF Lausanne, CH-1015 Lausanne, Switzerland}
\myaddress{brazil}{} 
\myaddress{virginia}{Physics Department, Virginia Tech, Blacksburg, Virginia 24061, USA}
\myaddress{lmu}{Arnold Sommerfeld Center for Theoretical Physics and Center for NanoScience, University of Munich, Theresienstrasse 37, 80333 Munich, Germany}
\myaddress{tokyo}{Department of Applied Physics, University of Tokyo, 113-8656 Tokyo, Japan}
\myaddress{stationq}{Microsoft Research, Station Q, University of California, Santa Barbara, CA 93106, USA}
\myaddress{rwth}{Institute for Solid State Theory, RWTH Aachen University, 52056 Aachen, Germany}
\myaddress{stuttgart}{Institut f\"ur Theoretische Physik III, Universit\"at Stuttgart, Pfaffenwaldring 57, 70550 Stuttgart, Germany}

\begin{abstract}
We present release 2.0 of the ALPS (Algorithms and Libraries for Physics Simulations)
project, an international open source software project to develop
libraries and application programs for the simulation of strongly
correlated quantum lattice models such as quantum magnets, lattice
bosons, and strongly correlated fermion systems. Development is
centered on common XML and HDF5 data formats, on libraries to
simplify and speed up code development, on common evaluation and plotting tools, and on full-featured
simulation programs. The programs enable non-experts to start carrying
out numerical simulations by providing basic implementations of the
important algorithms for quantum lattice models: classical and quantum
Monte Carlo (QMC) using non-local updates, extended ensemble
simulations, exact and full diagonalization (ED), as well as the
density matrix renormalization group (DMRG) both in a static version and a dynamic time-evolving block decimation (TEBD) code, and quantum Monte Carlo solvers for dynamical mean field theory (DMFT). Major changes in release 2.0 include the use of HDF5 for binary data, evaluation tools in Python, support for Windows  operating system, the use of CMake as build system and binary installation packages for Mac OS X and Windows, as well as integration with the VisTrails workflow provenance tool.
The software is available from our web server at \url{http://alps.comp-phys.org/}.
\end{abstract}

\section{Introduction}
\label{}

In this paper we present release 2.0 of the ALPS project  (Algorithms and Libraries for Physics Simulations), an open source software development project for strongly correlated lattice models. We will present a short overview  and focus on new features compared to the previous releases \cite{ALPS1.2,ALPS1.3}.

Quantum fluctuations and competing interactions in quantum many body
systems lead to unusual and exciting properties of strongly correlated
materials such as quantum magnetism, high temperature
superconductivity, heavy fermion
behavior, and topological quantum order.
The same strong interactions make accurate analytical treatments hard and 
direct numerical simulations are essential to increase our understanding of the unusual
properties of these systems. 

The last two decades have seen tremendous progress in the development of
algorithms.  Speedups of many orders of magnitude have been 
achieved \cite{Evertz03,Troyer03,White1992,Schollwock2005,vidal1,vidal2,Daley2004,White2004,Rubtsov04,Rubtsov05,Werner06,Werner06Kondo, Gull08_ctaux}. These
advances often come at the cost of increased algorithmic
complexity and challenge the current model of program development in
this research field. In contrast to other research areas, in which
large ``community codes'' are being used, the field of strongly
correlated systems has so far been based mostly on single codes developed by
individual researchers for particular projects. While simple
algorithms used a decade ago could be easily programmed by a beginning
graduate student in a matter of weeks, it now takes substantially
longer to master and implement the new algorithms while at the same time the use of numerical approaches is increasing.  

The ALPS project aims to
overcome the problems posed by the growing complexity of algorithms
and the specialization of researchers onto single algorithms through
an open-source software development initiative. Its goals are to simplify the development of new codes through libraries and evaluation tools, and to help users with ``black box'' codes of some of the most popular algorithms. To achieve these goals the ALPS project provides:
\begin{itemize}
\item {\bf standardized file formats} in XML \cite{xml} and HDF5 \cite{hdf5} to simplify exchange,
distribution and archiving of simulation results, and to achieve
interoperability between codes.

\item {\bf evaluation tools} for reading, writing and post processing simulation results, including the creation of 2D and 3D plots.

\item {\bf libraries} for common aspects of
simulations of quantum and classical lattice models, to simplify code
development.
\item a set of {\bf applications} covering the major algorithms. These are useful both for 
{\it theoreticians} who want to test theoretical ideas about quantum
lattice models and to explore their properties, as well as for 
{\it experimentalists} trying to fit experimental data to theoretical
models to obtain information about the microscopic properties of
materials.
\item{\bf license} conditions \cite{librarylicense,applicationlicense} that encourage researchers to contribute
to the ALPS project by gaining scientific credit for use of their
work.
\item {\bf outreach} through a web page \cite{alps}, mailing lists and
workshops to distribute the results and to educate researchers both
about the algorithms and the use of the applications.
\item {\bf improved reproducibility} of numerical results by
publishing source codes used to obtain published results and by integration with the VisTrails \cite{vistrails} provenance enabled workflow system.
\end{itemize}



 In the following, we present a quick review of these
 aspects of the ALPS project, focusing on new features in release 2.0:
 
 \begin{itemize}
\item CMake build system \cite{cmake}, simplifying configuration and enabling ALPS to be built on  Windows.
\item Binary installer packages for MacOS X and Windows.
\item Using the binary file format HDF5 \cite{hdf5} in addition to XML is much faster and needs less space.
\item More flexible and powerful evaluation tools using Python.
\item A revised and substantially faster version of the directed loop quantum Monte Carlo (QMC) code {\tt dirloop\_sse}, and two new applications: QMC solvers for dynamical 
mean field theory ({\tt dmft}) and a time-evolving block-decimation algorithm ({\tt tebd}) for the dynamics of one-dimensional quantum systems.
\item Integration with VisTrails workflow provenance system \cite{vistrails}.
\item An expanded set of tutorials.
 \end{itemize}
 
 
\section{Building and Installing ALPS}
\subsection{Build system}
One of the main new features in ALPS 2.0 is the change of the build system to CMake \cite{cmake}, which is more flexible and portable than the previously used autotools. CMake includes a graphical user interface to let the user choose installation options and manually override the paths to needed libraries if they have not been found automatically. Furthermore,  CMake supports the automatic creation of binary installation packages and building ALPS on Windows -- two often requested feature. A snapshot of the build instructions at the time of the release are included in the source distribution. Updated instructions as operating systems change will be made available on the ALPS web page \cite{alps}.

The following tools and libraries are required to build ALPS:

\begin{itemize}
\item The CMake build system \cite{cmake}.
\item The BLAS \cite{blasnetlib} and LAPACK libraries \cite{lapack}. Ideally optimized versions for the target architecture should be used instead of the generic netlib versions.
\item The Boost C++ libraries version (included in one version of the source tarball) \cite{boost}.
\item The HDF5 library version 1.8 \cite{hdf5}.
\item A standard complying C++ compiler. ALPS has been tested with gcc versions 4.2, 4.3 and 4.4 as well as MSVC 9.
\end{itemize}
To build optional parts of ALPS it is recommended to install in addition
\begin{itemize}
\item Python version 2.5 or 2.6 \cite{python}.
\item The numpy \cite{numpy}, scipy \cite{scipy} and matplotlib \cite{matplotlib} Python packages.
\item lpsolve version 4.0 \cite{lpsolve}.
\item The VisTrails scientific workflow and provenance management system \cite{vistrails} and all its dependencies.
\item A Fortran-90 compiler for the {\tt tebd} code.
\end{itemize}

\subsection{Binary Installation Packages}

To ease the installation on MacOS X and Windows, we provide CMake-generated binary installation packages for these operating systems. To use all features of ALPS we recommend to download and install a binary installer for VisTrails \cite{vistrails} in addition to the ALPS installers. On both operating systems the PATH variable should be adjusted to include the directory containing the ALPS binaries. The Windows installer gives the option to automatically do that. The default installation directory on Mac OS X is {\tt /opt/alps/bin} and on Windows {\tt C:$\backslash$Program Files$\backslash$ALPS$\backslash$bin} on 32-bit versions and  {\tt C:$\backslash$Program Files (x86)$\backslash$ALPS$\backslash$bin} on 64-bit versions respectively.

Source and binary installation packages for MacOS X using macports \cite{macports} and for Linux using Ubuntu and Debian package managers will be made available in the near future.


\subsection{LiveALPS.}

For Linux we additionally provide an ISO disk image, called liveALPS, of a full Linux distribution with ALPS preinstalled.  It is  
based on remastered CD-release of Knoppix \cite{knoppix} and is ready to use 
on a PC without special configuration. While it can be burned to a DVD we recommend using it with a USB flash drive for performance reasons.
This  solution is especially useful for Linux users that want to try ALPS, or in summers schools or lectures.

\section{Data formats}

The most fundamental part of the ALPS project is the definition of
common standardized file formats suitable for a wide range of
applications. Standardized file formats enable the exchange of data
between applications, allow the development of common evaluation
tools, simplify the application of more than one algorithm to a given
model, and are a prerequisite for the storage of simulation data in a
common archive.

\subsection{XML}
 The ISO
standard XML \cite{xml} was chosen in ALPS version 1 \cite{ALPS1.2,ALPS1.3} for the specification of these formats
because it has become
the main text-based data format on the internet and because it is
supported by a large and growing number of tools.
A number of XML  schemas \cite{xmlschema} have been designed in ALPS 1 to describe the input of simulation parameters,  the lattices,  quantum lattice models, and the output of results. ALPS 2 uses the same XML schemas to maintain compatibility.

\subsection{HDF5}

We now complement XML by the widely used Hierarchical Data Format 5 (HDF5) \cite{hdf5}, a de-facto standard for large binary files.  HDF5 is directly supported by many visualization and data analysis tools and a wide array of tools is 
available for C, C++, Fortran, Python and other languages. in ALPS, HDF5 is now used as the default format for simulation results since writing binary files is substantially faster than text-based formats when lots of data has to be written, and the files will be smaller thanks to compression of the binary data. 

The ALPS HDF5 files store simulation parameters, the detailed results of Monte Carlo simulations, spectra and expectation values of exact diagonalization and DMRG simulations, and time evolutions in the TEBD code. ALPS comes with a library of C++ and Python functions to load these results, but they can also be read with any other tool supporting HDF5. The exact schema of the HDF5 files is available on the ALPS web page \cite{alps}. For backward compatibility with users' evaluation tools, the simulation codes accept a {\tt --write-xml} command line option to write all results also in XML. 

\section{Evaluation Tools in Python}

The previous versions of ALPS  only had very limited data evaluation capabilities that were restricted to extracting plots from collections of XML file using XSLT. This is remedied in ALPS 2.0 by basing data evaluation on the powerful Python language \cite{python}. Python is an easy to learn interpreted object-oriented language, allowing interactive evaluation of the data and arbitrarily complex evaluations. 

We provide a complete set of library functions to write and read ALPS files, and a number of useful functions to evaluate the simulation results and to make plots. In particular the ALPS classes for the recoding and evaluation of Monte Carlo data are all exported from C++ to Python, enabling an easy binning analysis \cite{Ambegaokar2010} and jackknife analysis of Monte Carlo data.
Two-dimensional plots are created using the widely available Python matplotlib package \cite{matplotlib} or by using ALPS functions to write grace \cite{grace} or gnuplot \cite{gnuplot} input files. Creation of 3D graphs is supported through VisTrails and the Visualization ToolKit (VTK) \cite{vtk} VisTrails modules.



\section{Applications}
\label{sec:applications}
In addition to common libraries, the ALPS project includes a number of ready to use applications implementing the most important unbiased
algorithms for quantum many body systems. The applications all
share the same file formats, simplifying their use, reducing the
learning curve, and enabling the easy investigation of a model with
more than one method. Tutorials on the use of the applications are
included with the sources that can be found on the ALPS web
page \cite{alps}.

\subsection{Applications already existing in the previous version}
All applications from ALPS 1.3, with the exception of the single particle DMRG demonstration program, have been retained in ALPS 2.0. They continue to work in the same way, with minor bug fixes and patches for incompatibilities. Specifically we include:

\subsubsection{Exact diagonalization}
codes {\tt sparsediag} and {\tt fulldiag}. The former calculates the ground state
and low lying excited states of quantum lattice models using the
Lanczos \cite{lanczos} algorithm, while the latter calculates the complete
spectrum of quantum lattice models and from it all thermodynamic
properties. A new feature in {\tt fulldiag} allows the calculation of thermal averages of custom measurements specified by the user.


\subsubsection{Classical Monte Carlo} 
simulations of classical magnets employing local and cluster
updates \cite{Swendsen87} are implemented in the {\tt spinmc} application.

\subsubsection{Quantum Monte Carlo} codes include the {\tt loop}  program using the loop cluster
algorithm \cite{Evertz03,Todo01,looper}, an updated directed loop QMC \cite{Sylyuasen,Alet2005} program {\tt dirloop\_sse} and a  worm algorithm \cite{Prokofev98A} program  {\tt worm} and the {\tt qwl} program implementing Wang-Landau sampling for quantum spin systems \cite{Troyer03}. The {\tt dirloop\_sse} program has been reimplemented by S. Isakov, resulting in a substantial speedup.

  
\subsubsection{Density Matrix Renormalization Group (DMRG):} The {\tt dmrg} code implementing the DMRG algorithm \cite{White1992,Schollwock2005}  of ALPS 1.3 has been updated to support complex-valued Hamiltonians.

\subsection{New Dynamical Mean Field Theory QMC Solvers {\tt dmft}}
Dynamical mean field theory (DMFT) is a method to simulate fermionic lattice systems which approximates the self-energy $\Sigma(k,\omega)$ by a momentum-independent 
function $\Sigma(\omega)$. For such a ``local'' self-energy, the diagrammatic structure simplifies considerably and the lattice problem can be mapped onto an impurity problem subject to a self-consistency condition for the bath \cite{Georges96,Kotliar06}. The method may be extended from a single-site to a cluster formalism, thereby rendering it controlled in practice \cite{Maier05}.
We provide a simple implementation of the DMFT self-consistency loop for general single-site multi-orbital problems.
For the solution of the quantum impurity model we provide a legacy Hirsch-Fye QMC code \cite{Hirsch86} as well as two continuous-time QMC algorithms.

The ``weak coupling'' algorithm \cite{Rubtsov04,Rubtsov05} expands the impurity model partition function in powers of the interaction terms and samples the resulting diagrams stochastically. This method, historically
the first continuous-time quantum Monte Carlo impurity solver algorithm, is particularly suitable for the simulation of impurity clusters.
The complementary hybridization expansion algorithm \cite{Werner06,Werner06Kondo} expands the impurity model partition function in the impurity-bath hybridization, treating 
the local (impurity) Hamiltonian exactly. 
The method is useful to simulate multi-orbital models, since it can easily treat general interaction terms. A detailed description of the ALPS DMFT algorithms is given in Ref.~\cite{ALPSDMFT}.

\subsection{New Time Evolving Block Decimation Code {\tt tebd}}
Release 2.0 contains interfaces to the Open Source TEBD project \cite{ostebd}, which is a collection of Fortran libraries using the Time-Evolving Block Decimation (TEBD) algorithm\cite{vidal1, vidal2} to simulate time evolution of one-dimensional quantum systems.  The TEBD routines included in ALPS are an updated version of the v2.0 release of Open Source TEBD with improvements for speed and numerical stability.  TEBD can also find ground states via imaginary time evolution.  Because TEBD produces wavefunctions, a wide array of observables can be computed including local quantities, two-point correlation functions, entanglement measures, and overlaps between the state at different times.

At present, the TEBD routines can simulate the spin, boson Hubbard, hardcore boson, spinless fermions, and fermion Hubbard models from the ALPS models library.  All 
Hamiltonian parameters are assumed uniform throughout the system.  Observables calculated are the $z$ and $x$ magnetizations, their squares, and the $\langle \hat{S}^z_i 
\hat{S}^z_j\rangle$ and $\langle \hat{S}^x_i \hat{S}^x_j\rangle$ correlations for the spin model; the number, its square, and the $\langle \hat{n}_i \hat{n}_j\rangle$ and 
$\langle \hat{a}_i^{\dagger} \hat{a}_j\rangle$ correlation functions for the boson Hubbard, hardcore boson, spinless ferimons, and fermion Hubbard models; and, additionally, 
the magnetization and $\langle \hat{S}^z_i \hat{S}^z_j\rangle$ correlation function for the fermion Hubbard model.  All models calculate the energy, von Neumann entanglement 
entropy of each site, the von Neumann entanglement entropy of each bond, and the overlap of the wavefunction at time $t$ with the state at $t=0$ (i.e. the Loschmidt echo).

We plan to develop C++ libraries for performing real time evolution using the more flexible formalism of variational Matrix Product States.  These libraries will allow for more general specification of models, lattices, and observables, and improve the speed of simulations. 


\section{Integration with the VisTrails Workflow and Computational Provenance Tools}
\begin{figure}
\begin{center}

\vistrail[host=alps.ethz.ch,
db=vistrails,
vtid=10,
version=163,
pdf,
getvtl,
showspreadsheetonly]{width=8cm}
\caption{A figure produced by an ALPS VisTrails workflow: the uniform susceptibility of the Heisenberg chain and ladder. Clicking the figure retrieves the workflow used to 
create it. Opening that workflow lets the reader execute the full calculation.}
\label{fig:figure}
\end{center}
\end{figure}


\begin{figure}
\begin{center}
\vistrail[host=alps.ethz.ch,
db=vistrails,
vtid=10,
version=163,
pdf,
getvtl,
showworkflow,
showspreadsheetonly]{width=8cm}
\caption{The workflow that created Fig. \ref{fig:figure}. The workflow image has been created by VisTrails for the specific workflow used to create the exact version shown in the figure. Clicking the figure retrieves the workflow from the ALPS server.}
\label{fig:workflow}
\end{center}
\end{figure}



\begin{figure}
\begin{center}
\vistrail[host=alps.ethz.ch,
db=vistrails,
vtid=10,
version=163,
pdf,
getvtl,
showtree,
showspreadsheetonly]{width=8cm}
\caption{The version history tree of the workflow that created Fig. \ref{fig:figure}. Each ellipsis corresponds to a version of the workflow, as shown in Fig. \ref{fig:workflow}. Clicking the figure retrieves the vistrail including all workflow versions from the ALPS server.}
\label{fig:history}
\end{center}
\end{figure}

\subsection{Computational Provenance}
\subsection{Workflow systems}
\subsection{VisTrails}
\subsection{CrowdLabs}
also mention VisMashups
\subsection{The ALPS VisTrails package}
The ALPS team will write this after the above sections are done.
\section{Tutorials and Examples}

The ALPS web page \cite{alps} contains an extensive list of tutorials, explaining the use of the various application codes and evaluation tools and how to use of the ALPS libraries in the user's code. We provide tutorials and instructions for using ALPS in three ways: 
\begin{enumerate}
\item from the command line (without data evaluation and plotting)
\item using Python scripts
\item and using the VisTrails workflow system. 
\end{enumerate}

The input files needed for the tutorials are available on the web page but are also included in the source and binary distributions.

\begin{figure}
\begin{tiny}
\begin{center}
\begin{verbatim}
cat  > parm << EOF
LATTICE="chain lattice"
MODEL="spin"
local_S=1/2
L=60
J=1
THERMALIZATION=5000
SWEEPS=50000
ALGORITHM="loop"
{T=0.05;}
{T=0.1;}
{T=0.2;}
{T=0.3;}
{T=0.4;}
{T=0.5;}
{T=0.6;}
{T=0.7;}
{T=0.75;}
{T=0.8;}
{T=0.9;}
{T=1.0;}
{T=1.25;}
{T=1.5;}
{T=1.75;}
{T=2.0;}
EOF

parameter2xml parm
loop --auto-evaluate --write-xml parm.in.xml
\end{verbatim}
\end{center}
\end{tiny}
\caption{A shell script to perform an ALPS simulation to calculate the uniform susceptibility of a Heisenberg spin chain. Evaluation options are limited to viewing the output files. Any further evaluation requires the use of Python, VisTrails, or a program written by the user.}
\label{fig:commandline}
\end{figure}


\begin{figure}
\begin{tiny}
\begin{center}
\begin{verbatim}
import pyalps
import matplotlib.pyplot as plt
import pyalps.plot

#prepare the input parameters
parms = []
for t in [0.05, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.25, 1.5, 1.75, 2.0]:
    parms.append(
        { 
          'LATTICE'        : "chain lattice", 
          'MODEL'          : "spin",
          'local_S'        : 0.5,
          'T'              : t,
          'J'              : 1 ,
          'THERMALIZATION' : 5000,
          'SWEEPS'         : 50000,
          'L'              : 60,
          'ALGORITHM'      : "loop"
        }
    )

#write the input file and run the simulation
input_file = pyalps.writeInputFiles('parm2c',parms)
pyalps.runApplication('loop',input_file)

#load the susceptibility and collect it as function of temperature T
data = pyalps.loadMeasurements(pyalps.getResultFiles(prefix='parm2c'),'Susceptibility')
susceptibility = pyalps.collectXY(data,x='T',y='Susceptibility')

#make plot
plt.figure()
pyalps.plot.plot(susceptibility)
plt.xlabel('Temperature $T/J$')
plt.ylabel('Susceptibility $\chi J$')
plt.title('Quantum Heisenberg chain')
plt.show()
\end{verbatim}
\end{center}
\end{tiny}
\caption{A Python script to perform an ALPS simulation to calculate the uniform susceptibility of a Heisenberg spin chain, load and evaluate the data and make a plot. }
\label{fig:python}
\end{figure}

An example for running an ALPS application from the command line is shown in Fig. \ref{fig:commandline}. This example calculates the uniform susceptibility of a quantum Heisenberg spin chain. The same example, containing additional code to evaluate and plot the results  using Python is shown in Fig. \ref{fig:python}. The workflow using VisTrails is shown in Fig. \ref{fig:workflow}, and its version history in Fig. \ref{fig:history}. Following the links in the PDF version of the latter figures retrieves the corresponding vistrail files.

\section{License}
The ALPS libraries are licensed under the ALPS library license \cite{librarylicense} and the applications under the ALPS application license  \cite{applicationlicense}. These licenses are modeled after the GNU General Public License (GPL), but contain an additional requirement to cite this paper as well as relevant papers for each of the application codes. These papers need to be cited and the use of ALPS acknowledged in any scientific project that makes use of ALPS. This includes the case when ALPS has only been used to test a scientist's application code.

The detailed license text is included in the files {\tt LICENSE.txt} \cite{librarylicense} and {\tt LICENSE-applications.txt}  \cite{applicationlicense}. Any use of ALPS requires citing this paper.  These files can be found at he top level of the source distribution and in the directory {\tt share/alps} of the binary distrubutions. The papers that need to be cited for the use of a specific application are printed to the standard output when that application is run. The list of papers is also included in the file {\tt CITATIONS.txt}. Since some of those references are to preprints we recommend that the ALPS web page \cite{alps} is checked for updates.

\section{Future development plans}

The ALPS project is work in progress and development will continue after this release 2.0. Immediate plans for release 2.1 within about a year include the development of  more evaluation tools for Monte Carlo simulations and more 2D and 3D plotting functionality.

ALPS 2.1 will also provide support for more programming languages. In addition to the Python support in the current version we plan to add a Fortran library to write the ALPS HDF5 files from Fortran. This will enable the use of the ALPS evaluation tools not only with C++ or Python codes, but also with results of Fortran codes.

A key part of ALPS 2.1 will be a more flexible and optimized scheduler. It will allow  the simple integration of the ALPS codes into other programs and Python scripts. It is also designed to scale to tens of thousands of CPUs, compared to the current scheduler that scales only to a few thousand CPUs. 

Besides improved versions of some of the simulation codes, there will be a new worm algorithm program for optical lattice simulations with millions of lattice sites, and an extension of the DMFT codes to clusters.

ALPS is an open initiative and we welcome contributions from the community.


\section{Acknowledgements}

We thank A.F. Albuquerque, F. Alet, P. Corboz, P.Dayal, A. Honecker, A. L\"auchli, M. K\"orner,  A. Kozhevnikov, S. Manmana, I.P. McCulloch, F. Michel and R.M. Noack, for their contributions to previous versions of ALPS and  for useful discussions. We thank P. Zoller for the suggestion to provide binary installers. The development of ALPS has profited from support of the Pauli Center at ETH Z\"urich, the Swiss HP$^2$C initiative, the Kavli Institute for Theoretical Physics in Santa Barbara, the Aspen Center for Physics, the Swiss National Science Foundation, and a grant from the Army Research Office with funding from the DARPA OLE program.


\section*{References}

\bibliographystyle{iopart-num}
\bibliography{refs}
\end{document}
