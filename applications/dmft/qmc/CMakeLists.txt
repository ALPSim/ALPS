if(LAPACK_FOUND)
  add_definitions(${LAPACK_DEFINITIONS})
  include_directories(${PROJECT_SOURCE_DIR}/applications/dmft/qmc)
  set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} ${LAPACK_LINKER_FLAGS}")

  add_executable(dmft main.C externalsolver.C hirschfyesim.C fouriertransform.C hilberttransformer.C alps_solver.C 2dsimpson.C selfconsistency.C auxiliaryfunctions.C hybridization/impurity.C hybridization/fourpoint.C)
add_executable(hirschfye solver_main.C hirschfyesim.C externalsolver.C fouriertransform.C hilberttransformer.C alps_solver.C 2dsimpson.C auxiliaryfunctions.C)

  target_link_libraries(dmft alps boost ${LAPACK_LIBRARY} ${BLAS_LIBRARY})
  target_link_libraries(hirschfye alps boost ${LAPACK_LIBRARY} ${BLAS_LIBRARY})
  install(TARGETS dmft RUNTIME DESTINATION bin)
  install(TARGETS hirschfye  RUNTIME DESTINATION bin)
else(LAPACK_FOUND)
  message(STATUS "dmft will not be built since the lapack library has not been found")
endif(LAPACK_FOUND)
