#!/bin/sh

DIR=`dirname $0`
SRCDIR="@abs_srcdir@"
if test -z "$SRCDIR"; then
  SRCDIR="@CMAKE_CURRENT_SOURCE_DIR@"
fi
BUILDIDR="@abs_builddir@"
if test -z "$BUILDDIR"; then
  BUILDIDR="@CMAKE_CURRENT_BINARY_DIR@"
fi
  
if test -f "$DIR/config.py"; then
  SCRIPTDIR="$SRCDIR"
  PYTHONPATH=$SCRIPTDIR:$BUILDDIR:$PHTHONPATH
  export PYTHONPATH
else
  SCRIPTDIR="@PYTHON_SCRIPTDIR@/alps"
  PYTHONPATH=$SCRIPTDIR:$PHTHONPATH
  export PYTHONPATH
fi

if test `uname -s 2> /dev/null` = Darwin && test `(uname -r | cut -s -d. -f1) 2> /dev/null` = 10; then
  # for Mac OS X Snow Leopard
  VERSIONER_PYTHON_PREFER_32_BIT=yes
  export VERSIONER_PYTHON_PREFER_32_BIT
  arch -i386 @PYTHON_INTERPRETER@ "$SCRIPTDIR/preview.py" "$@" < /dev/null &
else
  @PYTHON_INTERPRETER@ "$SCRIPTDIR/preview.py" "$@" < /dev/null &
fi
